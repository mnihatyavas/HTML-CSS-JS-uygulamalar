<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="iso:8859-9 Türkçe">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
    <title>C1d3b4b.html: Fareli lapTop'la yada dokunmatik iPhone'la kutunun beyanlý taþýnmasý örneði.</title>
    <style>
        html {
            background-color: #135;
            overflow: hidden;}
        body {margin:0;}
        div {
            background-color: #E21F20;
            background-image: linear-gradient(to bottom right, rgba(0,0,0,0), rgba(0,0,0,0.7));
            width: 200px;
            height: 150px;
            border: 1px solid Lime;
            position: absolute;}
    </style>
</head>
<body>
    <div arya-etiketi="Basýlý fare yada dokunmayla kutunun taþýnmasý">F12 konsol beyanýný aç</div>

    <script>
        document.body.width = window.innerWidth;
        document.body.height = window.innerHeight;

        let konumX, konumY;
        document.onmousemove = konumuYönet;
        document.ontouchmove = konumuYönet;
        function konumuYönet (o) {
            if ((o.clientX) && (o.clientY)) {
                konumX = o.clientX;
                konumY = o.clientY;
            }else if (o.targetTouches) {
                konumX = o.targetTouches [0].clientX;
                konumY = o.targetTouches [0].clientY;
                o.preventDefault();
            } // else sonu..
        } // func sonu...

        const kutu = document.querySelector ("div");
        let ilkKonumX = null;
        let ilkKonumY = null;
        let rAF;
        kutu.onmousedown = function() {// Kutuyu fareyle taþýma...
            ilkKutuX = kutu.offsetLeft;
            ilkKutuY = kutu.offsetTop;
            kutuyuTaþý();
        } // kutu sonu...
        kutu.ontouchstart = function (o) {// Kutuyu dokunmatikle taþýma...
            ilkKutuX = kutu.offsetLeft;
            ilkKutuY = kutu.offsetTop;
            konumuYönet (o);
            kutuyuTaþý();
        } // kutu sonu...
        document.onmouseup = taþýmayýDurdur; // Fareyle taþýmayý durdur...
        document.ontouchend = taþýmayýDurdur; // Dokunmatikle taþýmayý durdur...

        function kutuyuTaþý() {
            if (ilkKonumX === null) {
                ilkKonumX = konumX;
                ilkKonumY = konumY;
            }else {
                let taþýnanKonumX = konumX - ilkKonumX;
                let taþýnanKonumY = konumY - ilkKonumY;
                let telafiX = ilkKutuX + taþýnanKonumX;
                let telafiY = ilkKutuY + taþýnanKonumY;
                console.log ("(" + telafiX + ", " + telafiY + ")"); // Dokunmatik iPhone deðil fakat fareli lapTop F12 açar...
                kutu.style.left = telafiX + "px";
                kutu.style.top = telafiY + "px";
            } // else sonu...
            rAF = requestAnimationFrame (kutuyuTaþý);
        } // func sonu...

        function taþýmayýDurdur() {
            cancelAnimationFrame (rAF);
            console.log ("Kutu taþýnmasý durduruldu");
            ilkKonumX = null;
            ilkKonumY = null;
        } // func sonu...
    </script>
</body>
</html>