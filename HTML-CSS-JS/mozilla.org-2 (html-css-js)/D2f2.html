<!DOCTYPE html>
<html>
<head>
    <meta charset="iso:8859-9 Türkçe">
    <title>D2f2.html: KopyalaTaþý'nýn DataTransfer.items ile sürükle-býrak aþamalarý örneði.</title>
    <style>
        html {background-color: #152; font-family: sans-serif;}
        body {
            background-color: #a97;
            max-width: 60%;
            min-width: 400px;
            padding: 20px;
            margin: 2em auto;
            border: 5px solid tomato;}
        div {
            margin: 0em;
            padding: 2em;}
        #kaynaktan-kopyala, #kaynaktan-taþý  {
            color: blue;
            border: 5px solid black;
            width: 300px;
            height: 50;
            background-color: khaki;}
        #hedefe-kopyala, #hedefe-taþý {
            border: 5px solid blue;
            width: 300px;
            height: 50;
            color: DarkRed;}
    </style>
</head>
<body>
    <h1>Sürükle ve Býrak: Elemanlarý <code>DataTransfer.items</code> arabaðlacý ile kopyala ve taþý</h1>
    <div draggable="true" id="kaynaktan-kopyala" ondragstart="sürükleBaþý_yönetimi (event);" ondragend="sürükleSonu_yönetimi (event);">
        Bu elemaný seç ve <strong>Kopyalananý Býrakma Bölgesi</strong>'ne sürükle.
    </div>
    <div id="hedefe-kopyala" ondrop="býrak_yönetimi (event);" ondragover="hedefÜstü_yönetimi (event);"><strong>Kopyalananý Býrakma Bölgesi</strong></div>

    <div draggable="true" id="kaynaktan-taþý" ondragstart="sürükleBaþý_yönetimi (event);" ondragend="sürükleSonu_yönetimi (event);">
        Bu elemaný seç ve <strong>Taþýnaný Býrakma Bölgesi</strong>'ne sürükle.
    </div> 
    <div id="hedefe-taþý" ondrop="býrak_yönetimi (event);" ondragover="hedefÜstü_yönetimi (event);"><strong>Taþýnaný Býrakma Bölgesi</strong></div>
</body>
<script>
    function sürükleBaþý_yönetimi (olay) {
        console.log ("ondragstart: sürükleBaþý");
        var dti = olay.dataTransfer.items;
        if (dti === undefined || dti == null) {console.log ("Tarayýcýnýz DataTransfer.items arabaðlacýný desteklemiyor"); return;}
        olay.currentTarget.style.border = "dashed";
        dti.add (olay.target.id, "text/plain");
        olay.effectAllowed = "copyMove";
    } // func sonu...

    function hedefÜstü_yönetimi (olay) {
        console.log ("ondragover: hedefÜstü");
        var dti = olay.dataTransfer.items;
        if (dti === undefined || dti == null) {console.log ("Tarayýcýnýz DataTransfer.items arabaðlacýný desteklemiyor"); return;}
        olay.currentTarget.style.background = "lightblue";
        olay.preventDefault();
    } // func sonu...

    function býrak_yönetimi (olay) {
        console.log ("Býrak");
        olay.preventDefault();
        var dti = olay.dataTransfer.items;
        if (dti === undefined || dti == null) {console.log ("Tarayýcýnýz DataTransfer.items arabaðlacýný desteklemiyor"); return;}
        for (var i=0; i < dti.length; i++) {
            console.log ("Býrak: birim[" + i + "].çeþidi = " + dti [i].kind + " ; birim[" + i + "].tipi = " + dti [i].type);
            if ((dti [i].kind == "string") && (dti [i].type.match ("^text/plain"))) {
                dti [i].getAsString (function (id) {
                   if (id == "kaynaktan-taþý" && olay.target.id == "hedefe-taþý") olay.target.appendChild(document.getElementById (id));
                    if (id == "kaynaktan-kopyala" && olay.target.id == "hedefe-kopyala") {
                        var yumruKopyasý = document.getElementById (id).cloneNode (true);
                        yumruKopyasý.id = "newId";
                        olay.target.appendChild (yumruKopyasý);
                    } // if sonu...
                }); // dti sonu...
            } // if sonu...
        } // for sonu...
    } // func sonu...

    function sürükleSonu_yönetimi (olay) {
        console.log ("ondragend: sürükleSonu");
        var dti = olay.dataTransfer.items;
        if (dti === undefined || dti == null) {console.log ("Tarayýcýnýz DataTransfer.items arabaðlacýný desteklemiyor"); return;}
        olay.target.style.border = "solid black";
        dti.clear();
    } // func sonu...
</script>
</html>